<div class="change-password-container">
  <h2>Promena lozinke</h2>
  <hr />

  <form #passwordForm="ngForm">
    <!-- ✅ ДОДАЈЕМО ПОЉЕ ЗА КОРИСНИЧКО ИМЕ -->
    <div class="form-group">
      <label for="username">Korisničko ime *</label>
      <input 
        type="text" 
        id="username" 
        name="username" 
        [(ngModel)]="username" 
        required 
        class="form-control"
        placeholder="Unesite vaše korisničko ime">
    </div>

    <div class="form-group">
      <label for="oldPassword">Stara lozinka *</label>
      <input 
        type="password" 
        id="oldPassword" 
        name="oldPassword" 
        [(ngModel)]="oldPassword" 
        required 
        class="form-control"
        placeholder="Unesite trenutnu lozinku">
    </div>

    <div class="form-group">
      <label for="newPassword">Nova lozinka *</label>
      <input 
        type="password" 
        id="newPassword" 
        name="newPassword" 
        [(ngModel)]="newPassword" 
        required 
        class="form-control"
        placeholder="Unesite novu lozinku">

      <div class="password-strength" *ngIf="newPassword">
        <span>Snaga lozinke: </span>
        <span [style.color]="getPasswordStrengthColor()">{{ getPasswordStrength() }}</span>
      </div>

      <small class="form-text">
        Lozinka mora:<br>
        • Imati 6-10 karaktera<br>
        • Počinjati slovom<br>
        • Sadržati bar 1 veliko slovo<br>
        • Sadržati bar 3 mala slova<br>
        • Sadržati bar 1 broj<br>
        • Sadržati bar 1 specijalni karakter
      </small>
    </div>

    <div class="form-group">
      <label for="confirmPassword">Potvrdite novu lozinku *</label>
      <input 
        type="password" 
        id="confirmPassword" 
        name="confirmPassword" 
        [(ngModel)]="confirmPassword" 
        required 
        class="form-control"
        placeholder="Ponovite novu lozinku">

      <div class="password-mismatch" *ngIf="confirmPassword && newPassword !== confirmPassword">
        ❌ Lozinke se ne poklapaju
      </div>
      <div class="password-match" *ngIf="confirmPassword && newPassword === confirmPassword">
        ✅ Lozinke se poklapaju
      </div>
    </div>

    <button 
      type="button" 
      (click)="changePassword()" 
      [disabled]="!passwordForm.form.valid || isLoading" 
      class="btn btn-primary">
      <span *ngIf="isLoading">Menjam lozinku...</span>
      <span *ngIf="!isLoading">Promeni lozinku</span>
    </button>
  </form>

  <div *ngIf="message" class="message" [class.success]="message.includes('uspešno')" [class.error]="!message.includes('uspešno')">
    {{ message }}
  </div>

  <div class="links">
    <a href="javascript:void(0)" (click)="goBackToHome()">← Nazad na početnu</a>
  </div>
</div>